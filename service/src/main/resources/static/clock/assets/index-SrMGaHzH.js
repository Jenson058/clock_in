import{z as E,d as N,r as m,A as D,c as d,b as o,w as t,_ as k,a as F,F as _,x as b,B as M,E as T,g as r,o as l,l as p,D as $,h,y as g,t as q,n as x,k as z}from"./index-Dy3wVuRg.js";import{u as L}from"./RoleStore-DameUVYJ.js";import{R as y}from"./RoleApi-D6Oyjcry.js";class U{async all(){return await E.get("/auth/all")}}const j=new U,G={class:"auth"},H=N({__name:"index",setup(v){const f=m([]),n=m([]),A=M(),s=L();D(async()=>{V(),R()});function V(){j.all().then(a=>{f.value=a.content})}function R(){let a={id:s.getRoleVo().id??localStorage.getItem("roleId")};y.get(a).then(e=>{var c;n.value=((c=e==null?void 0:e.data)==null?void 0:c.authAll)??[],s.getRoleVo().id||s.setRoleVo(e==null?void 0:e.data)})}async function w(){await A.push("role")}async function B(){let a={...s.getRoleVo()};a.authAll=n.value,console.log(a),y.edit(a).then(async()=>{T.success("保存成功")})}return(a,e)=>{const c=r("el-icon"),C=r("el-checkbox"),I=r("el-checkbox-group"),S=r("el-card");return l(),d(_,null,[o(k,{class:"btn",type:"info",onClick:w},{default:t(()=>[o(c,null,{default:t(()=>[o(p($))]),_:1}),h("返回角色 ")]),_:1}),o(k,{type:"primary",class:"btn",onClick:B},{default:t(()=>[h(" 保存 ")]),_:1}),F("div",G,[(l(!0),d(_,null,b(f.value,i=>(l(),g(S,{class:"card"},{header:t(()=>[h(q(p(x)("auth.key."+i.key)),1)]),default:t(()=>[o(I,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=u=>n.value=u)},{default:t(()=>[(l(!0),d(_,null,b(i.value,u=>(l(),g(C,{class:"checkbox",label:p(x)("auth.controls."+u),value:i.key+":"+u,border:""},null,8,["label","value"]))),256))]),_:2},1032,["modelValue"])]),_:2},1024))),256))])],64)}}}),P=z(H,[["__scopeId","data-v-2a84a678"]]);export{P as default};
