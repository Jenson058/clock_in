import{z as E,d as N,r as m,A as D,c as d,b as a,w as o,_ as b,a as F,F as _,x as k,B as M,E as T,g as r,o as n,l as p,D as $,h,y as g,t as q,n as x,k as z}from"./index-Cbuz69k2.js";import{u as L}from"./RoleStore-BimUFHm8.js";import{R as y}from"./RoleApi-Cm_fV_sS.js";class U{async all(){return await E.get("/auth/all")}}const j=new U,G={class:"auth"},H=N({__name:"index",setup(v){const f=m([]),l=m([]),A=M(),s=L();D(async()=>{V(),R()});function V(){j.all().then(t=>{f.value=t.content})}function R(){let t={id:s.getRoleVo().id??localStorage.getItem("roleId")};y.get(t).then(e=>{var c;l.value=((c=e==null?void 0:e.content)==null?void 0:c.authAll)??[],s.getRoleVo().id||s.setRoleVo(e==null?void 0:e.content)})}async function w(){await A.push("role")}async function B(){let t={...s.getRoleVo()};t.authAll=l.value,console.log(t),y.edit(t).then(async()=>{T.success("保存成功")})}return(t,e)=>{const c=r("el-icon"),C=r("el-checkbox"),I=r("el-checkbox-group"),S=r("el-card");return n(),d(_,null,[a(b,{class:"btn",type:"info",onClick:w},{default:o(()=>[a(c,null,{default:o(()=>[a(p($))]),_:1}),h("返回角色 ")]),_:1}),a(b,{type:"primary",class:"btn",onClick:B},{default:o(()=>[h(" 保存 ")]),_:1}),F("div",G,[(n(!0),d(_,null,k(f.value,i=>(n(),g(S,{class:"card"},{header:o(()=>[h(q(p(x)("auth.key."+i.key)),1)]),default:o(()=>[a(I,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=u=>l.value=u)},{default:o(()=>[(n(!0),d(_,null,k(i.value,u=>(n(),g(C,{class:"checkbox",label:p(x)("auth.controls."+u),value:i.key+":"+u,border:""},null,8,["label","value"]))),256))]),_:2},1032,["modelValue"])]),_:2},1024))),256))])],64)}}}),P=z(H,[["__scopeId","data-v-d29b0b49"]]);export{P as default};
