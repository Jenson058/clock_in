import{d as G,r as d,c as S,a as K,b as a,w as o,l as m,F as B,U as R,m as b,E as k,g as i,o as y,_,h as V,t as g,n as w,q as O,v as Q,C as W,s as x,x as X,y as Y}from"./index-Cbuz69k2.js";import{J as Z,P as ee}from"./JensonTable-BT5Pky2i.js";import{_ as T}from"./JensonEditModel.vue_vue_type_script_setup_true_lang-Bezn-LtO.js";import{R as le,a as ae}from"./RoleApi-Cm_fV_sS.js";const ie=G({__name:"index",setup(te){const U=d([]),p=d(new ee),r=d(!1),c=d(!1),t=d(new x),C=d([]),h=d([]),v=d([]);async function f(){var s,u;let n=new R(p.value.page,p.value.pageSize),e=await b.pageAll(n);U.value=((s=e==null?void 0:e.content)==null?void 0:s.content)??[],p.value.total=((u=e==null?void 0:e.content)==null?void 0:u.totalElements)??0}function $(n){n.preventDefault()}function D(){t.value=new x,r.value=!0}function E(n){t.value={...n},r.value=!0}function M(){let n={...t.value};b.edit(n).then(async()=>{k.success("保存成功"),r.value=!1,c.value=!1,await f()})}function N(){t.value.roleList=v.value??[];let n={...t.value};b.edit(n).then(async()=>{k.success("保存成功"),r.value=!1,c.value=!1,v.value=[],await f()})}function F(){let n=new R;n.idList=C.value.map(e=>e.id??0),b.delAll(n).then(async()=>{await f(),k.success("删除成功")})}function I(n){b.del({id:n.id}).then(async()=>{await f(),k.success("删除成功")})}function J(n){t.value={...n},le.listAll(new ae).then(e=>{h.value=e==null?void 0:e.content}),v.value=n.roleList??[],c.value=!0}return(n,e)=>{const s=i("el-input"),u=i("el-form-item"),P=i("el-date-picker"),L=i("el-radio-button"),q=i("el-radio-group"),z=i("el-form"),H=i("el-checkbox"),j=i("el-checkbox-group");return y(),S(B,null,[K("div",{class:"box",onContextmenu:e[2]||(e[2]=l=>$(l))},[a(Z,{"column-list":m(W).getColumnList(m(x)),"table-data":U.value,"page-config":p.value,"onUpdate:pageConfig":e[0]||(e[0]=l=>p.value=l),onInitTable:f,onHandleSelectionChange:e[1]||(e[1]=l=>C.value=l),column:"",setting:"",selection:"",view:"",refresh:""},{"header-add":o(()=>[a(_,{type:"primary",onClick:D,auth:"user:add"},{default:o(()=>[V(g(m(w)("btn.add")),1)]),_:1}),O(a(_,{type:"danger",onClick:F},{default:o(()=>[V(g(m(w)("btn.deleteAll")),1)]),_:1},512),[[Q,C.value.length>0]])]),controls:o(({row:l})=>[a(_,{type:"success",onClick:A=>E(l)},{default:o(()=>[V(g(m(w)("btn.edit")),1)]),_:2},1032,["onClick"]),a(_,{type:"warning",onClick:A=>J(l)},{default:o(()=>[V(g(m(w)("btn.role")),1)]),_:2},1032,["onClick"]),a(_,{type:"danger",onClick:A=>I(l)},{default:o(()=>[V(g(m(w)("btn.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["column-list","table-data","page-config"])],32),a(T,{modelValue:r.value,"onUpdate:modelValue":e[9]||(e[9]=l=>r.value=l),type:"drawer",title:"新增/编辑 用户","submit-on-click":M},{default:o(()=>[a(z,null,{default:o(()=>[a(u,{label:"姓名","label-width":"70"},{default:o(()=>[a(s,{modelValue:t.value.name,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.name=l)},null,8,["modelValue"])]),_:1}),a(u,{label:"昵称","label-width":"70"},{default:o(()=>[a(s,{modelValue:t.value.nickname,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.nickname=l)},null,8,["modelValue"])]),_:1}),a(u,{label:"出生年月","label-width":"70"},{default:o(()=>[a(P,{modelValue:t.value.birthday,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.birthday=l),type:"date"},null,8,["modelValue"])]),_:1}),a(u,{label:"性别","label-width":"70"},{default:o(()=>[a(q,{modelValue:t.value.sex,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.sex=l)},{default:o(()=>[a(L,{label:"男"}),a(L,{label:"女"})]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"手机号","label-width":"70"},{default:o(()=>[a(s,{type:"number",modelValue:t.value.phone,"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.phone=l)},null,8,["modelValue"])]),_:1}),a(u,{label:"邮箱","label-width":"70"},{default:o(()=>[a(s,{modelValue:t.value.e_mail,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.e_mail=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(T,{modelValue:c.value,"onUpdate:modelValue":e[11]||(e[11]=l=>c.value=l),title:"绑定角色",style:{width:"500px"},"submit-on-click":N},{default:o(()=>[a(j,{modelValue:v.value,"onUpdate:modelValue":e[10]||(e[10]=l=>v.value=l)},{default:o(()=>[(y(!0),S(B,null,X(h.value,l=>(y(),Y(H,{label:l.name,value:l.id,border:""},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])],64)}}});export{ie as default};
